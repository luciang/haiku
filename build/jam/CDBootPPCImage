# This file defines what ends up in the CD boot image and it executes the
# rules building the image.

#HAIKU_BOOT_FLOPPY = haiku-boot-floppy.image ;
#MakeLocate $(HAIKU_BOOT_FLOPPY) : $(HAIKU_OUTPUT_DIR) ;

# CD image target
HAIKU_CD_BOOT_PPC_IMAGE = haiku-boot-cd-ppc.iso ;
MakeLocate $(HAIKU_CD_BOOT_PPC_IMAGE) : $(HAIKU_OUTPUT_DIR) ;

# the pseudo target all archive contents is attached to
NotFile $(HAIKU_CD_BOOT_PPC_IMAGE_CONTAINER_NAME) ;

# extra files to put on the boot iso
local extras = README.html ;
SEARCH on $(extras) = [ FDirName $(HAIKU_TOP) data boot_cd ] ;

local chrpboot = ofboot.b ;
SEARCH on $(chrpboot) = [ FDirName $(HAIKU_TOP) data boot_cd ] ;

local hfsmaps = hfs.map ;
SEARCH on $(hfsmaps) = [ FDirName $(HAIKU_TOP) data boot_cd ] ;




BuildCDBootPPCImage $(HAIKU_CD_BOOT_PPC_IMAGE) : $(hfsmaps) : boot_loader_openfirmware : $(chrpboot) : $(extras) ;


NotFile haiku-boot-cd-ppc ;
Depends haiku-boot-cd-ppc : $(HAIKU_CD_BOOT_PPC_IMAGE) ;


