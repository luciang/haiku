SubDir OBOS_TOP src documentation ;

XSLTPROC ?= xsltproc ;

rule Doc2HTML
{
	local source = [ FGristFiles $(1) ] ;
	local target = $(1:S=.html) ;

	SEARCH on $(source) = $(SEARCH_SOURCE) ;

	MakeLocate $(target) : [ FDirName $(OBOS_DISTRO_TARGET) beos documentation Shell\ Tools ] ;

        Depends $(target) : $(source) ;
        LocalDepends doc_files : $(target) ;
	XSLPROCPATHS on $(target) = $(XSLPATHS:J=\ ) ;
	Doc2HTML1 $(target) : $(source) ;
        LocalClean clean : $(target) ;
}

actions Doc2HTML1
{
	$(XSLTPROC) -xinclude -path "$(XSLPROCPATHS)" -o "$(1)" $(HTMLXSLSHEET) $(2) ;
}

XSLPATHS = [ FDirName $(OBOS_OBJECT_TARGET) documentation Shell_Tools ] [ FDirName $(OBOS_TOP) src bin coreutils man ] ;
HTMLXSLSHEET = http://docbook.sourceforge.net/release/xsl/current/html/docbook.xsl ;

Doc2HTML 
	Shell_Tools-Guide.xml
	;

Includes [ FGristFiles Shell_Tools-Guide.xml ] : <src!bin!coreutils!man>coreutils.xml ;
SEARCH on <src!bin!coreutils!man>coreutils.xml = [ FDirName $(OBOS_TOP) src bin coreutils man ] ;
