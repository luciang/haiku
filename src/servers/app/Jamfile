SubDir OBOS_TOP src servers app ;

Depends app_server : install_fonts ;

AddResources app_server : app_server.rdef ;

UseLibraryHeaders png zlib ;
UsePrivateHeaders app interface [ FDirName servers app ] ;
UseFreeTypeHeaders ;

SharedLibrary appserver :
	Angle.cpp
	BGet++.cpp
	BitmapManager.cpp
	ColorSet.cpp
	CursorData.cpp
	CursorHandler.cpp
	Decorator.cpp
	drawing/DisplayDriver.cpp
	drawing/DisplayDriverImpl.cpp
	drawing/DisplaySupport.cpp
	FontFamily.cpp
	GraphicsBuffer.cpp
	IPoint.cpp
	LayerData.cpp
	drawing/PatternHandler.cpp
	drawing/PixelRenderer.cpp
	RectUtils.cpp
	RGBColor.cpp
	ServerBitmap.cpp
	ServerCursor.cpp
	ServerFont.cpp
	FontServer.cpp
	SysCursor.cpp
	SystemPalette.cpp
	TokenHandler.cpp
	Utils.cpp
;

LinkSharedOSLibs libappserver.so : root be 							  
	<boot!home!config!lib>libopenbeos.so
	libfreetype.so ;

Server app_server :
	# Misc. Sources
	FMWList.cpp
	PicturePlayer.cpp
	PNGDump.cpp
	RAMLinkMsgReader.cpp

	# Manager Classes
	AppServer.cpp
	CursorManager.cpp
	Desktop.cpp
	ServerApp.cpp
	ServerWindow.cpp

	# DisplayDriver Classes
	# Clipper.cpp
	drawing/AccelerantDriver.cpp
	drawing/BitmapDriver.cpp
	drawing/ViewDriver.cpp
	drawing/DirectDriver.cpp
	# We'll just remove this from the build for a little while...
	#drawing/ScreenDriver.cpp

	DefaultDecorator.cpp
	Layer.cpp
	RootLayer.cpp
	ServerPicture.cpp
	ServerScreen.cpp
	WinBorder.cpp
	Workspace.cpp

;

LINKFLAGS on app_server ?= $(LINKFLAGS) ;
LINKFLAGS on app_server += -lbe ;

LinkSharedOSLibs app_server : root game translation libz.so libpng.so libappserver.so
							   <boot!home!config!lib>libopenbeos.so 
							   libfreetype.so ;

SubInclude OBOS_TOP src servers app fonts ;
