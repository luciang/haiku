SubDir OBOS_TOP src data etc timezones ;

rule MkZicComp
{
	local binaries = $(1) ;
	local source = $(2) ;

	SEARCH on $(source) = $(SEARCH_SOURCE) ;
	
	MakeLocate $(binaries) : [ FDirName $(OBOS_ETC_DIR) timezones ] ;
	
	LocalDepends files : $(binaries) ;
	Depends $(binaries) : $(source) zic ;
	
	MkZicComp1 $(binaries) : zic $(source) "" ;
	LocalClean clean : $(binaries) ;
}

actions MkZicComp1
{
	$(2[1]) -d "$(2[3])" -L /dev/null "$(2[2])" ;
}

local timezoneFiles = africa antarctica asia australasia 
		europe northamerica southamerica 
		pacificnew etcetera factory backward ;

# generate the binary file for the timezone files
local tzFile ;
for tzFile in [ FGristFiles $(timezoneFiles) ] {
	local binaries = [ on $(tzFile) return $(TZ_OBJECTS) ] ;
	MkZicComp [ FGristFiles $(binaries) ] : $(tzFile) ;
}

