SubDir OBOS_TOP src kernel boot platform bios_ia32 ;

SubDirHdrs $(OBOS_TOP) headers private kernel boot platform $(OBOS_BOOT_PLATFORM) ;

UsePrivateHeaders [ FDirName kernel disk_device_manager ] ;
UsePrivateHeaders [ FDirName storage ] ;

KernelMergeObject boot_platform_bios_ia32.o :
	<$(SOURCE_GRIST)>shell.S
	<$(SOURCE_GRIST)>start.c
	<$(SOURCE_GRIST)>debug.c
	<$(SOURCE_GRIST)>bios.S
	<$(SOURCE_GRIST)>console.cpp
	<$(SOURCE_GRIST)>devices.cpp
	<$(SOURCE_GRIST)>keyboard.cpp
	<$(SOURCE_GRIST)>menu.cpp
	<$(SOURCE_GRIST)>mmu.cpp
	<$(SOURCE_GRIST)>cpu.cpp
	<$(SOURCE_GRIST)>smp_boot.c
	<$(SOURCE_GRIST)>smp_trampoline.S
	<$(SOURCE_GRIST)>support.S
	<$(SOURCE_GRIST)>video.cpp
	: -fno-pic
	;
