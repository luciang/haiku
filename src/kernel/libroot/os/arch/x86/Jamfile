SubDir OBOS_TOP src kernel libroot os arch x86 ;

KernelMergeObject os_arch_$(OBOS_ARCH).o :
	<$(SOURCE_GRIST)>atomic.S
	<$(SOURCE_GRIST)>cpuid.S
	<$(SOURCE_GRIST)>systeminfo.c
	<$(SOURCE_GRIST)>thread.c
	<$(SOURCE_GRIST)>tls.c
	:
	-fPIC -DPIC
	;

MergeObjectFromObjects kernel_os_arch_$(OBOS_ARCH).o :
	# ToDo: remove atomic_xxx() functions from the kernel's libx86.a
	#<$(SOURCE_GRIST)>atomic.o
	<$(SOURCE_GRIST)>cpuid.o
	;
