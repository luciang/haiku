SubDir OBOS_TOP src kits storage ;

# The adapter library we need.

SharedLibrary beadapter :
	LibBeAdapter.cpp
;
LinkSharedOSLibs libbeadapter.so :
	be
;


# The library containing the storage kit classes.

UsePrivateHeaders storage ;
UsePrivateHeaders app ;

UsePublicHeaders storage ;
UsePublicHeaders app ;
UsePublicHeaders [ FDirName add-ons file_system ] ;

# This is something of a hack until we get around to
# compiling the sniffer code separately into an archive
# that can just be linked into libstorage.so and the
# registrar separately.
SEARCH_SOURCE += [ FDirName $(SUBDIR) sniffer ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) mime ] ;

SharedLibrary storage :
	# storage
	AppFileInfo.cpp
	Directory.cpp
	Entry.cpp
	EntryList.cpp
	File.cpp
	FindDirectory.cpp
	Mime.cpp
	MimeType.cpp
	Node.cpp
	NodeInfo.cpp
	OffsetFile.cpp
	Path.cpp
	Query.cpp
	QueryPredicate.cpp
	ResourcesContainer.cpp
	ResourceFile.cpp
	ResourceItem.cpp
	Resources.cpp
	ResourceStrings.cpp
	Statable.cpp
	SymLink.cpp
	Volume.cpp
	VolumeRoster.cpp
	kernel_interface.POSIX.cpp
	storage_support.cpp
	
	# storage/sniffer
	Err.cpp				
	DisjList.cpp		
	Pattern.cpp			
	PatternList.cpp		
	Parser.cpp			
	Range.cpp			
	RPattern.cpp		
	RPatternList.cpp	
	Rule.cpp			

	# storage/mime
	Database.cpp
	InstalledTypes.cpp
	Supertype.cpp
	database_access.cpp
	database_support.cpp
;
LinkSharedOSLibs libstorage.so :
	libopenbeos.so
	be
	libbeadapter.so
	stdc++.r4
;

