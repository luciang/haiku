SubDir OBOS_TOP src kits storage ;

UsePrivateHeaders $(DOT) ;
UsePrivateHeaders [ FDirName kernel disk_device_manager ] ;
UsePrivateHeaders shared ;
UsePrivateHeaders storage ;

SEARCH_SOURCE += [ FDirName $(OBOS_TOP) src kits storage ] ;

# We need to keep the DiskDevice API out of libopenbeos as long as the
# Interface Kit is not fully functional (at least the part we are using).
# So, we build a separate library.
#
SharedLibrary diskdevice
	: #AddOnImage.cpp
	  DiskDevice.cpp
	  DiskDeviceJob.cpp
#	  DiskDeviceList.cpp
	  DiskDevicePrivate.cpp
	  DiskDeviceRoster.cpp
	  DiskDeviceTypes.cpp
	  DiskDeviceVisitor.cpp
#	  DiskScannerAddOn.cpp
	  DiskSystem.cpp
	  Partition.cpp
#	  PartitioningDialog.cpp
	  PartitioningInfo.cpp

	: <boot!home!config!lib>libdisk_device_manager.so be
;
AbsSymLink <boot!home!config!lib>libdiskdevice.so : libdiskdevice.so
	: /boot/home/config/lib : false ;
