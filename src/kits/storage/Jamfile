SubDir OBOS_TOP src kits storage ;

# The adapter library we need.

SharedLibrary beadapter :
	LibBeAdapter.cpp
;
LinkSharedOSLibs libbeadapter.so :
	be
;


# The library containing the storage kit classes.

UsePrivateHeaders storage ;

UsePublicHeaders storage ;
UsePublicHeaders [ FDirName add-ons file_system ] ;

# This is something of a hack until we get around to
# compiling the sniffer code separately into an archive
# that can just be linked into libstorage.so and the
# registrar separately.
SEARCH_SOURCE += [ FDirName $(SUBDIR) sniffer ] ;

SharedLibrary storage :
	Directory.cpp
	Entry.cpp
	EntryList.cpp
	File.cpp
	FindDirectory.cpp
	Mime.cpp
	MimeType.cpp
	Node.cpp
	#NodeInfo.cpp
	OffsetFile.cpp
	Path.cpp
	Query.cpp
	QueryPredicate.cpp
	ResourcesContainer.cpp
	ResourceFile.cpp
	ResourceItem.cpp
	Resources.cpp
	ResourceStrings.cpp
	Parser.cpp		# Hack-o-rama
	Range.cpp		# Hack-o-rama
	Rule.cpp		# Hack-o-rama
	Statable.cpp
	SymLink.cpp
	Volume.cpp
	VolumeRoster.cpp
	kernel_interface.POSIX.cpp
	storage_support.cpp
;
LinkSharedOSLibs libstorage.so :
	be
	libbeadapter.so
	stdc++.r4
;

