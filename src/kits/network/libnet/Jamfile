SubDir OBOS_TOP src kits network libnet ;

UseHeaders [ FDirName $(SUBDIR) headers ] ;
UsePrivateHeaders net ;

{
	# Default libs include BeOS R5 libnet.so, something we don't want here!
	LINKFLAGS on libnet.so = [ on libnet.so return $(LINKFLAGS) ] -nodefaultlibs ;
	
	local defines = BUILDING_R5_LIBNET ;
	if $(BONE_VERSION) {
		defines += BONE_VERSION ;
	}
	defines = [ FDefines $(defines) ] ;
	SubDirCcFlags $(defines) ;
	SubDirC++Flags $(defines) ;
}

Depends libnet.so : install_network_etc_files ;

SharedLibrary net :
	socket.c
	select.c 
	poll.c
	compat.c
	arc4random.c
	base64.c
	ethers.c
	freeaddrinfo.c
	inet_addr.c
	inet_ntoa.c
	inet_neta.c
	inet_netof.c
	inet_lnaof.c
	inet_network.c
	inet_pton.c
	inet_ntop.c
	getaddrinfo.c
	gethostnamadr.c
	getnameinfo.c
	getnetbyaddr.c
	getnetbyname.c
	getnetnamadr.c
	getprotoname.c
	getnetent.c
	getproto.c
	getprotoent.c
	getservent.c
	getservbyname.c
	getservbyport.c
	linkaddr.c
	res_comp.c
	res_data.c
	res_debug.c
	res_init.c
	res_mkquery.c
	res_query.c
	res_random.c
	res_send.c
	sethostent.c

	: root
;

OBOSInstall install_network_etc_files : [ FDirName $(OBOS_ETC_DIR) ] :
	resolv.conf
	services
	protocols
	networks
;

# Installation -- in the test directory for the time being
OBOSInstallRelSymLink install-networking
	: [ FDirName $(OBOS_TEST_DIR) kits net lib ]
	: libnet.so
	: installed-networking-test ;

Package haiku-networkingkit-cvs :
	README.html ;

Package haiku-networkingkit-cvs :
	libnet.so :
#	boot home config lib ;
	boot home Desktop haiku-networkingkit lib ;
