SubDir HAIKU_TOP src kits opengl mesa ;

UsePrivateHeaders opengl ;

UseHeaders [ FDirName $(SUBDIR) main ] ;
UseHeaders [ FDirName $(SUBDIR) glapi ] ;
UseHeaders [ FDirName $(SUBDIR) math ] ;
UseHeaders [ FDirName $(SUBDIR) tnl ] ;
UseHeaders [ FDirName $(SUBDIR) shader ] ;
UseHeaders [ FDirName $(SUBDIR) swrast ] ;
UseHeaders [ FDirName $(SUBDIR) swrast_setup ] ;

SEARCH_SOURCE += [ FDirName $(SUBDIR) array_cache ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) glapi ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) main ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) math ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) shader ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) swrast ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) swrast_setup ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) tnl ] ;

SEARCH_SOURCE += [ FDirName $(SUBDIR) x86 ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) sparc ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) ppc ] ;


SubDirCcFlags 
	-DBEOS_THREADS 
	-DGNU_ASSEMBLER 
	-DUSE_X86_ASM 
	-DUSE_MMX_ASM 
	-DUSE_3DNOW_ASM 
	-DUSE_SSE_ASM ;

StaticLibrary libmesa.a : 

	# main
	api_arrayelt.c
	api_loopback.c
	api_noop.c
	api_validate.c
	accum.c
	attrib.c
	blend.c
	bufferobj.c
	buffers.c
	clip.c
	colortab.c
	context.c
	convolve.c
	debug.c
	depth.c
	dispatch.c
	dlist.c
	drawpix.c
	enable.c
	enums.c
	eval.c
	extensions.c
	feedback.c
	fog.c
	get.c
	hash.c
	hint.c
	histogram.c
	image.c
	imports.c
	light.c
	lines.c
	matrix.c
	occlude.c
	pixel.c
	points.c
	polygon.c
	rastpos.c
	state.c
	stencil.c
	texcompress.c
	texcompress_s3tc.c
	texcompress_fxt1.c
	texformat.c
	teximage.c
	texobj.c
	texstate.c
	texstore.c
	varray.c
	vtxfmt.c

	# math
	m_debug_clip.c
	m_debug_norm.c
	m_debug_xform.c
	m_eval.c
	m_matrix.c
	m_translate.c
	m_vector.c
	m_xform.c

	# array_cache
	ac_context.c
	ac_import.c

	# tnl
	t_array_api.c
	t_array_import.c
	t_context.c
	t_pipeline.c
	t_save_api.c
	t_save_loopback.c
	t_save_playback.c
	t_vb_cull.c
	t_vb_fog.c
	t_vb_light.c
	t_vb_normals.c
	t_vb_points.c
	t_vb_program.c
	t_vb_render.c
	t_vb_texgen.c
	t_vb_texmat.c
	t_vb_vertex.c
	t_vertex.c
	t_vertex_c.c
	t_vertex_codegen.c
	t_vtx_api.c
	t_vtx_generic.c
	t_vtx_x86.c
	t_vtx_eval.c
	t_vtx_exec.c 

	# swrast
	s_fragprog_to_c.c
	s_aaline.c
	s_aatriangle.c
	s_accum.c
	s_alpha.c
	s_alphabuf.c
	s_atifragshader.c
	s_auxbuffer.c
	s_bitmap.c
	s_blend.c
	s_buffers.c
	s_copypix.c
	s_context.c
	s_depth.c
	s_drawpix.c
	s_feedback.c
	s_fog.c
	s_imaging.c
	s_lines.c
	s_logic.c
	s_masking.c
	s_nvfragprog.c
	s_pixeltex.c
	s_points.c
	s_readpix.c
	s_span.c
	s_stencil.c
	s_tcc.c
	s_texture.c
	s_texstore.c
	s_triangle.c
	s_zoom.c

	# swrast_setup
	ss_context.c
	ss_triangle.c 	

	# shader
	arbfragparse.c
	arbprogparse.c
	arbprogram.c
	arbvertparse.c
	atifragshader.c
	grammar_mesa.c
	nvfragparse.c
	nvprogram.c
	nvvertexec.c
	nvvertparse.c
	program.c
	shaderobjects.c

	# x86
	common_x86.c
	x86.c
	3dnow.c
	sse.c

	# sparc
	sparc.c

	# ppc	
	common_ppc.c

	# TODO: check if $(TARGET_ARCH) == x86?
	# x86
	common_x86_asm.S
	x86_xform2.S	
	x86_xform3.S	
	x86_xform4.S	
	x86_cliptest.S	
	mmx_blend.S		
	3dnow_xform1.S	
	3dnow_xform2.S	
	3dnow_xform3.S	
	3dnow_xform4.S	
	3dnow_normal.S	
	sse_xform1.S	
	sse_xform2.S	
	sse_xform3.S	
	sse_xform4.S	
	sse_normal.S
	read_rgba_span_x86.S
	
	# tnl
	t_vtx_x86_gcc.S

	# glapi
	glapi.c
	glthread.c
;

