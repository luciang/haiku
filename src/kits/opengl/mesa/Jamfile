SubDir OBOS_TOP src kits opengl mesa ;

UsePrivateHeaders opengl ;

UseHeaders [ FDirName $(SUBDIR) main ] ;
UseHeaders [ FDirName $(SUBDIR) glapi ] ;
UseHeaders [ FDirName $(SUBDIR) math ] ;
UseHeaders [ FDirName $(SUBDIR) tnl ] ;
UseHeaders [ FDirName $(SUBDIR) shader ] ;
UseHeaders [ FDirName $(SUBDIR) swrast ] ;
UseHeaders [ FDirName $(SUBDIR) swrast_setup ] ;


SubDirCcFlags 
	-DBEOS_THREADS 
	-DGNU_ASSEMBLER 
	-DUSE_X86_ASM 
	-DUSE_MMX_ASM 
	-DUSE_3DNOW_ASM 
	-DUSE_SSE_ASM ;

StaticLibrary mesa : 

	main/api_arrayelt.c
	main/api_loopback.c
	main/api_noop.c
	main/api_validate.c
	main/accum.c
	main/attrib.c
	main/blend.c
	main/bufferobj.c
	main/buffers.c
	main/clip.c
	main/colortab.c
	main/context.c
	main/convolve.c
	main/debug.c
	main/depth.c
	main/dispatch.c
	main/dlist.c
	main/drawpix.c
	main/enable.c
	main/enums.c
	main/eval.c
	main/extensions.c
	main/feedback.c
	main/fog.c
	main/get.c
	main/hash.c
	main/hint.c
	main/histogram.c
	main/image.c
	main/imports.c
	main/light.c
	main/lines.c
	main/matrix.c
	main/occlude.c
	main/pixel.c
	main/points.c
	main/polygon.c
	main/rastpos.c
	main/state.c
	main/stencil.c
	main/texcompress.c
	main/texcompress_s3tc.c
	main/texcompress_fxt1.c
	main/texformat.c
	main/teximage.c
	main/texobj.c
	main/texstate.c
	main/texstore.c
	main/varray.c
	main/vtxfmt.c

	math/m_debug_clip.c
	math/m_debug_norm.c
	math/m_debug_xform.c
	math/m_eval.c
	math/m_matrix.c
	math/m_translate.c
	math/m_vector.c
	math/m_xform.c
	
	array_cache/ac_context.c
	array_cache/ac_import.c
	
	tnl/t_array_api.c
	tnl/t_array_import.c
	tnl/t_context.c
	tnl/t_pipeline.c
	tnl/t_save_api.c
	tnl/t_save_loopback.c
	tnl/t_save_playback.c
	tnl/t_vb_cull.c
	tnl/t_vb_fog.c
	tnl/t_vb_light.c
	tnl/t_vb_normals.c
	tnl/t_vb_points.c
	tnl/t_vb_program.c
	tnl/t_vb_render.c
	tnl/t_vb_texgen.c
	tnl/t_vb_texmat.c
	tnl/t_vb_vertex.c
	tnl/t_vertex.c
	tnl/t_vertex_c.c
	tnl/t_vertex_codegen.c
	tnl/t_vtx_api.c
	tnl/t_vtx_generic.c
	tnl/t_vtx_x86.c
	tnl/t_vtx_eval.c
	tnl/t_vtx_exec.c 

	swrast/s_fragprog_to_c.c
	swrast/s_aaline.c
	swrast/s_aatriangle.c
	swrast/s_accum.c
	swrast/s_alpha.c
	swrast/s_alphabuf.c
	swrast/s_atifragshader.c
	swrast/s_auxbuffer.c
	swrast/s_bitmap.c
	swrast/s_blend.c
	swrast/s_buffers.c
	swrast/s_copypix.c
	swrast/s_context.c
	swrast/s_depth.c
	swrast/s_drawpix.c
	swrast/s_feedback.c
	swrast/s_fog.c
	swrast/s_imaging.c
	swrast/s_lines.c
	swrast/s_logic.c
	swrast/s_masking.c
	swrast/s_nvfragprog.c
	swrast/s_pixeltex.c
	swrast/s_points.c
	swrast/s_readpix.c
	swrast/s_span.c
	swrast/s_stencil.c
	swrast/s_tcc.c
	swrast/s_texture.c
	swrast/s_texstore.c
	swrast/s_triangle.c
	swrast/s_zoom.c

	swrast_setup/ss_context.c
	swrast_setup/ss_triangle.c 	

	shader/arbfragparse.c
	shader/arbprogparse.c
	shader/arbprogram.c
	shader/arbvertparse.c
	shader/atifragshader.c
	shader/grammar_mesa.c
	shader/nvfragparse.c
	shader/nvprogram.c
	shader/nvvertexec.c
	shader/nvvertparse.c
	shader/program.c
	shader/shaderobjects.c

	x86/common_x86.c
	x86/x86.c
	x86/3dnow.c
	x86/sse.c
	sparc/sparc.c
	ppc/common_ppc.c

	# TODO: check if $(OBOS_ARCH) == x86?
	x86/common_x86_asm.S
	x86/x86_xform2.S	
	x86/x86_xform3.S	
	x86/x86_xform4.S	
	x86/x86_cliptest.S	
	x86/mmx_blend.S		
	x86/3dnow_xform1.S	
	x86/3dnow_xform2.S	
	x86/3dnow_xform3.S	
	x86/3dnow_xform4.S	
	x86/3dnow_normal.S	
	x86/sse_xform1.S	
	x86/sse_xform2.S	
	x86/sse_xform3.S	
	x86/sse_xform4.S	
	x86/sse_normal.S
	x86/read_rgba_span_x86.S
	tnl/t_vtx_x86_gcc.S

	glapi/glapi.c
	glapi/glthread.c
	
	: STATIC_LIBRARY_DIR
;

