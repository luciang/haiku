SubDir OBOS_TOP src tools rman ;

NotFile doc_files ;
Depends files : doc_files ;

SubDirCcFlags -w ;

BinCommand rman : rman.c : ;


rule Man2Doc
{
        local source = [ FGristFiles $(2) ] ;
	local binary = $(1) ;

        SEARCH on $(source) = $(SEARCH_SOURCE) ;

        MakeLocate $(binary) : [ FDirName $(OBOS_DISTRO_TARGET) beos documentation Shell_Tools ] ;

        Depends $(binary) : $(source) rman ;

	LocalDepends doc_files : $(binary) ;
        Man2Doc1 $(binary) : rman $(source) ;
        LocalClean clean : $(binary) ;
}

actions Man2Doc1
{
        $(2[1]) -f XML "$(2[2])" > "$(1)" ;
}

rule Man2Docs
{
        # Man2Docs <sources> ;
        local source ;
        for source in [ FGristFiles $(1) ]
        {
                local target = $(source:S=.xml) ;

                Man2Doc $(target) : $(source) ;
        }
}


Man2Docs rman.1 ;
