SubDir OBOS_TOP src apps diskprobe ;

UsePrivateHeaders shared ;

if ! $(DANO_COMPATIBLE) {
	local defines = COMPILE_FOR_R5 ;
	defines = [ FDefines $(defines) ] ;
	SubDirCcFlags $(defines) ;
	SubDirC++Flags $(defines) ;
}

local r5_src = strlcpy.c ;

if $(HAIKU_COMPATIBLE) {
	r5_src = ;
}

App DiskProbe :
	DiskProbe.cpp
	DataEditor.cpp
	DataView.cpp
	ProbeWindow.cpp
	FileWindow.cpp
	AttributeWindow.cpp
	AttributeEditors.cpp
	ProbeView.cpp
	OpenWindow.cpp
	FindWindow.cpp
	$(r5_src)
	: libbe.so libtracker.so libtranslation.so
	: DiskProbe.rdef
	;

if $(HAIKU_COMPATIBLE) {
	LinkSharedOSLibs DiskProbe : libroot.so ;
}

SEARCH on [ FGristFiles
                strlcpy.c
        ] = [ FDirName $(OBOS_TOP) src system libroot posix string ] ;
