SubDir HAIKU_TOP src apps debugger ;

CCFLAGS +=  -Werror ;
C++FLAGS += -Werror ;

UsePrivateHeaders debug interface kernel shared ;
UsePrivateSystemHeaders ;

SEARCH_SOURCE += [ FDirName $(SUBDIR) arch ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) arch x86 ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) debug_info ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) debugger_interface ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) gui team_window ] ;
SEARCH_SOURCE += [ FDirName $(SUBDIR) model ] ;

local debugAnalyzerSources
	= [ FDirName $(HAIKU_TOP) src apps debuganalyzer ] ;

SubDirHdrs [ FDirName $(SUBDIR) demangler ] ;
SubDirHdrs [ FDirName $(HAIKU_TOP) src bin debug ] ;
SubDirHdrs [ FDirName $(debugAnalyzerSources) gui ] ;

Application Debugger :
	Debugger.cpp
#	ElfFile.cpp
	Jobs.cpp
	TeamDebugger.cpp
	Worker.cpp

	# arch
	Architecture.cpp
	CpuState.cpp
	Register.cpp

	# arch/x86
	ArchitectureX86.cpp
	CpuStateX86.cpp

	# debug_info
	BasicFunctionDebugInfo.cpp
	DebuggerDebugInfo.cpp
	DebugInfo.cpp
	FunctionDebugInfo.cpp
	ImageDebugInfo.cpp
	ImageDebugInfoProvider.cpp

	# debugger_interface
	DebugEvent.cpp
	DebuggerInterface.cpp

	# gui/team_window
	ImageListView.cpp
	RegisterView.cpp
	SourceView.cpp
	StackTraceView.cpp
	TeamWindow.cpp
	ThreadListView.cpp

	# model
	Image.cpp
	ImageInfo.cpp
	SourceCode.cpp
	StackFrame.cpp
	StackTrace.cpp
	Statement.cpp
	SymbolInfo.cpp
	Team.cpp
	TeamDebugModel.cpp
	Thread.cpp
	ThreadInfo.cpp

# DWARF
#	attribute_classes.cpp
#	AttributeValue.cpp
#	DebugInfoEntries.cpp
#	DebugInfoEntry.cpp
#	DwarfManager.cpp
#	SourceLanguageInfo.cpp
#	tag_names.cpp

	:
	<nogrist>Debugger_demangler.o
	<nogrist>Debugger_disasm_x86.o
	<nogrist>DebugAnalyzer_gui_table.o

	libudis86.a
	<bin>debug_utils.a
	libcolumnlistview.a
	libshared.a

	$(TARGET_LIBSTDC++)
	be libdebug.so

	: Debugger.rdef
;

HaikuSubInclude arch x86 disasm ;
HaikuSubInclude demangler ;
HaikuSubInclude gui running_teams_window ;
