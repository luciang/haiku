SubDir OBOS_TOP src tests add-ons kernel file_systems iso9660 iso9660_shell ;

SubDirHdrs $(OBOS_TOP) src add-ons kernel file_systems iso9660 ;
SubDirHdrs $(OBOS_TOP) src tests add-ons kernel file_systems fs_shell ;

{
	local defines = [ FDefines USER DEBUG ] ; # _NO_INLINE_ASM
	SubDirCcFlags $(defines) -fno-exceptions -fno-rtti ; #-fcheck-memory-usage
}

local fsShellSources = 
	fsh.c rootfs.c initfs.c kernel.c cache.c external_commands.cpp sl.c
	stub.c tracker.cpp sysdep.c hexdump.c argv.c
;

SimpleTest iso9660_shell
	:
	$(fsShellSources)

	iso.c kernel_interface.c
	:
	;

# Tell Jam where to find these sources
SEARCH on [ FGristFiles
		iso.c kernel_interface.c
	] = [ FDirName $(OBOS_TOP) src add-ons kernel file_systems iso9660 ] ;

SEARCH on [ FGristFiles
		$(fsShellSources)
	] = [ FDirName $(OBOS_TOP) src tests add-ons kernel file_systems fs_shell ] ;
