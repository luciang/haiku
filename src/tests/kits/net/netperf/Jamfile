SubDir OBOS_TOP src tests kits net netperf ;

Depends netperf : install_netperf_scripts ;

if ! $(BONE_COMPATIBLE) {
	SubDirCcFlags -DBUILDING_R5_LIBNET -Dclose=closesocket ;
}

SubDirCcFlags -w ;

local net_files =
	netsh.c
	netlib.c
	nettest_bsd.c
	nettest_dlpi.c
	nettest_unix.c
	nettest_xti.c
	nettest_ipv6.c
	nettest_dns.c
	;

Objects $(net_files) ;

SimpleTest netperf : 
	netperf.c
	[ FGristFiles $(net_files:S=$(SUFOBJ)) ]
	: $(NETWORK_LIBS)
;

SimpleTest netserver : 
	netserver.c
	[ FGristFiles $(net_files:S=$(SUFOBJ)) ]
	: $(NETWORK_LIBS)
;

OBOSInstall install_netperf_scripts : [ FDirName $(OBOS_TEST_DIR) kits net netperf ] :
	snapshot_script
	tcp_range_script
	tcp_rr_script
	tcp_stream_script
	udp_rr_script
	udp_stream_script
	packet_byte_script
	arr_script
;


