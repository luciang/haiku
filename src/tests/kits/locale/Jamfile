SubDir HAIKU_TOP src tests kits locale ;

UsePublicHeaders locale ;

# Pseudo target to build all locale kit tests
NotFile LocaleKitTests ;
Depends LocaleKitTests 
	:
	catalogSpeed
	catalogTest
	catalogTestAddOn
	collatorSpeed
	collatorTest
	localeTest
#	NumberFormatTests
	;

rule LocaleTest
{
	# LocaleTest <sources> ;
	local sources = $(1) ;
	local name = $(sources[1]:B) ;
	Application $(name) : $(sources) : be liblocale.so ;
}

LocaleTest catalogSpeed.cpp ;
LocaleTest catalogTest.cpp ;
LocaleTest collatorSpeed.cpp ;
LocaleTest collatorTest.cpp ;
LocaleTest genericNumberFormatTest.cpp ;
LocaleTest localeTest.cpp ;

Addon catalogTestAddOn 
	: catalogTestAddOn.cpp 
	: be liblocale.so 
	;

# For the unit tests we need liblocale.so to live in the `lib' subdirectory
# of the UnitTester application. We simply create a symlink that can be
# referred to by `<unittests>liblocale.so'.
#{
#	local symlink = <unittests>liblocale.so ;
#	MakeLocate $(symlink) : [ FDirName $(LOCALE_UNITTESTS_DIR) lib ] ;
#	RelSymLink $(symlink) : liblocale.so ;
#}

# TODO: activate this again, once it's working!
# SubInclude HAIKU_TOP src tests kits locale number_format ;
