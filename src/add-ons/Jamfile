SubDir OBOS_TOP src add-ons ;

KernelLd
	zero
	:
	<$(SOURCE_GRIST)!kernel!drivers!common>zero.o
	kernel.so
	:
	$(OBOS_TOP)/src/kernel/core/addons/ldscripts/$(OBOS_ARCH)/addon.ld
	:
	-Bdynamic -shared
	:
	:
	drivers/dev/zero
	; 

KernelLd
	null
	:
	<$(SOURCE_GRIST)!kernel!drivers!common>null.o
	kernel.so
	:
	$(OBOS_TOP)/src/kernel/core/addons/ldscripts/$(OBOS_ARCH)/addon.ld
	:
	-Bdynamic -shared
	:
	:
	drivers/dev/null
	; 

#KernelLd
#	digit
#	:
#	<$(SOURCE_GRIST)!kernel!drivers!common>digit.o
#	kernel.so
#	:
#	$(OBOS_TOP)/src/kernel/core/addons/ldscripts/$(OBOS_ARCH)/addon.ld
#	:
#	-Bdynamic -shared
#	:
#	:
#	drivers/dev/digit
#	; 

KernelLd
	random
	:
	<$(SOURCE_GRIST)!kernel!drivers!random>driver.o
	kernel.so
	:
	$(OBOS_TOP)/src/kernel/core/addons/ldscripts/$(OBOS_ARCH)/addon.ld
	:
	-Bdynamic -shared
	:
	:
	drivers/dev/random
	; 

KernelLd
	ps2mouse
	:
	<$(SOURCE_GRIST)!kernel!drivers!arch!$(OBOS_ARCH)!ps2mouse>ps2mouse.o
	kernel.so
	:
	$(OBOS_TOP)/src/kernel/core/addons/ldscripts/$(OBOS_ARCH)/addon.ld
	:
	-Bdynamic -shared
	:
	:
	drivers/dev/ps2mouse
	; 

KernelLd
	keyboard
	:
	<$(SOURCE_GRIST)!kernel!drivers!arch!$(OBOS_ARCH)!keyboard>keyboard.o
	kernel.so
	:
	$(OBOS_TOP)/src/kernel/core/addons/ldscripts/$(OBOS_ARCH)/addon.ld
	:
	-Bdynamic -shared
	:
	:
	drivers/dev/keyboard
	; 

# This needs to be fixed once the various headers are fixed.
#KernelLd 
#	ac97
#	:
#	<$(SOURCE_GRIST)!kernel!drivers!audio!ac97!ich>ac97_multi.o
#	<$(SOURCE_GRIST)!kernel!drivers!audio!ac97!ich>config.o
#	<$(SOURCE_GRIST)!kernel!drivers!audio!ac97!ich>debug.o
#	<$(SOURCE_GRIST)!kernel!drivers!audio!ac97!ich>ich.o
#	<$(SOURCE_GRIST)!kernel!drivers!audio!ac97!ich>io.o
#	<$(SOURCE_GRIST)!kernel!drivers!audio!ac97!ich>util.o   
#	kernel.so
#	:
#	$(OBOS_TOP)/src/kernel/core/addons/ldscripts/$(OBOS_ARCH)/addon.ld
#	:
#	-Bdynamic -shared
#	:
#	:
#	addons/drivers/dev/audio/ac97
#	; 
	

SubInclude OBOS_TOP src add-ons input_server ;
SubInclude OBOS_TOP src add-ons kernel ;
SubInclude OBOS_TOP src add-ons media ;
SubInclude OBOS_TOP src add-ons net ;
SubInclude OBOS_TOP src add-ons print ;
