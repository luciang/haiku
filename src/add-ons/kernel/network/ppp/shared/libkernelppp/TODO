- finish support for server mode
- add callback support
