SubDir HAIKU_TOP src add-ons kernel bus_managers pci ;

UsePrivateKernelHeaders ;
UsePrivateHeaders shared ;
UsePrivateHeaders [ FDirName kernel util ] ;

KernelAddon pci :
	pci.cpp
	pci_fixup.cpp
	pci_info.cpp
	pci_module.c
	pci_root.cpp
	pci_device.cpp
	: pci_arch_bus_manager.a
	;

# pci_info.cpp currently needs pcihdr.h so we make its path available and adds dependency
ObjectHdrs [ FGristFiles pci_info$(SUFOBJ) ]
	: [ FDirName $(TARGET_COMMON_DEBUG_OBJECT_DIR) preferences devices ] ;
Includes [ FGristFiles pci_info.cpp ] : <src!preferences!devices>pcihdr.h ;

SubInclude HAIKU_TOP src add-ons kernel bus_managers pci arch $(TARGET_ARCH) ;
