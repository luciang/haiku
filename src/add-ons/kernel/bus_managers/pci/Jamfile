SubDir OBOS_TOP src add-ons kernel bus_managers pci ;

UsePrivateHeaders [ FDirName kernel ] ;
UsePrivateHeaders [ FDirName kernel util ] ;

KernelAddon pci : kernel bus_managers :
	pci.cpp
	pci_info.cpp
	pci_module.c
	pci_device.c
	kernel_cpp.cpp
	: pci_arch_bus_manager.a
	;

SEARCH on [ FGristFiles
		kernel_cpp.cpp 
	] = [ FDirName $(OBOS_TOP) src system kernel util ] ;

# pci_info.cpp currently needs pcihdr.h so we make its path available
ObjectHdrs [ FGristFiles pci_info$(SUFOBJ) ]
	: [ FDirName $(OBOS_TOP) src preferences devices ] ;

SubInclude OBOS_TOP src add-ons kernel bus_managers pci arch $(OBOS_ARCH) ;
