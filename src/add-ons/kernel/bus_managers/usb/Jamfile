SubDir HAIKU_TOP src add-ons kernel bus_managers usb ;

SetSubDirSupportedPlatformsBeOSCompatible ;

SubDirC++Flags -fno-rtti ;

SubDirSysHdrs $(SUBDIR) ;
UsePrivateHeaders [ FDirName kernel ] ;
if $(TARGET_PLATFORM) != haiku {
	UsePublicHeaders [ FDirName drivers ] ;
} else {
	UseArchHeaders $(TARGET_ARCH) ;
	UsePrivateHeaders [ FDirName kernel boot platform $(TARGET_BOOT_PLATFORM) ] ;
}

KernelStaticLibrary libusb.a :
	Stack.cpp
	Device.cpp
	Hub.cpp
	BusManager.cpp
	Transfer.cpp
	Pipe.cpp
	Interface.cpp
	Object.cpp
	PhysicalMemoryAllocator.cpp
	: -fno-pic
;	

KernelAddon usb :
	usb.cpp
	: libusb.a
	: usb.rdef
	;

