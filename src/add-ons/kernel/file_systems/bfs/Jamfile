SubDir OBOS_TOP src add-ons kernel file_systems bfs ;

if $(DEBUG) {
	local defines = [ FDefines DEBUG ] ;
	SubDirCcFlags $(defines) ;
	SubDirC++Flags $(defines) ;
}

R5KernelAddon obfs : [ FDirName kernel file_systems bfs ] :
	BlockAllocator.cpp
	BPlusTree.cpp
	cpp.cpp
	Debug.cpp
	Index.cpp
	Inode.cpp
	Journal.cpp
	kernel_interface.cpp
	Query.cpp
	Utility.cpp
	Volume.cpp
	BufferPool.cpp
;

rule InstallBFS
{
	Depends $(<) : $(>) ;
}

actions ignore InstallBFS
{
	cp $(>) /boot/home/config/add-ons/kernel/file_systems/
}

InstallBFS install : obfs ;
