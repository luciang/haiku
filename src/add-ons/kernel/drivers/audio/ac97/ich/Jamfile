SubDir OBOS_TOP src add-ons kernel drivers audio ac97 ich ;

UsePrivateHeaders media ;

R5KernelAddon ich_ac97 : kernel drivers bin :
	ac97_multi.c
	config.c
	debug.c
	ich.c
	io.c
	util.c
	ac97.c
;

# For OpenBeOS we should be building the driver objects this way.
#KernelObjects
#	ac97_multi.c
#	config.c
#	debug.c
#	ich.c
#	io.c
#	util.c   
#	ac97.c
#	:
#	-fno-pic -D_KERNEL_MODE
#	;

Packages openbeos-ich-ac97-cvs openbeos-ich-ac97-debug-cvs :
	ich_ac97 :
	boot home config add-ons kernel drivers bin ;
Packages openbeos-ich-ac97-cvs openbeos-ich-ac97-debug-cvs :
	<kernel!drivers!dev!audio!multi>ich_ac97 :
	boot home config add-ons kernel drivers dev audio multi ;

# Link to kernel/drivers/dev/audio/multi
{
	local dir = [ FDirName $(OBOS_ADDON_DIR) kernel drivers dev audio multi ] ;
	local instDriver = <kernel!drivers!dev!audio!multi>ich_ac97 ;
	MakeLocate $(instDriver) : $(dir) ;
	RelSymLink $(instDriver) : ich_ac97 ;
}

SubInclude OBOS_TOP src add-ons kernel drivers audio ac97 ich distro ;
