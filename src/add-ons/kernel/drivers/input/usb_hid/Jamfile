SubDir HAIKU_TOP src add-ons kernel drivers input usb_hid ;

SetSubDirSupportedPlatformsBeOSCompatible ;

SubDirC++Flags -fno-rtti ;

SubDirSysHdrs $(HAIKU_TOP) headers os drivers ;
UsePrivateHeaders [ FDirName kernel util ] input ;
UsePrivateHeaders kernel ;

local buffer_impl = ;
if ! $(TARGET_PLATFORM_HAIKU_COMPATIBLE) {
	buffer_impl = ring_buffer.cpp ;
}

KernelAddon usb_hid :
	DeviceList.cpp
	Driver.cpp
	HIDDevice.cpp
	KeyboardDevice.cpp
	MouseDevice.cpp
	hidparse.c
	$(buffer_impl)
;

SEARCH on [ FGristFiles ring_buffer.cpp ] = [ FDirName $(HAIKU_TOP) src system kernel util ] ;

Package haiku-inputkit-cvs :
        usb_hid :
        boot home config add-ons kernel drivers bin ;

PackageDriverSymLink haiku-inputkit-cvs : input usb_hid ;
