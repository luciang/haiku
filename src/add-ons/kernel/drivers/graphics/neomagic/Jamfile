SubDir OBOS_TOP src add-ons kernel drivers graphics neomagic ;

UsePrivateHeaders graphics ;
UsePrivateHeaders [ FDirName graphics neomagic ] ;

R5KernelAddon nm.driver : kernel drivers bin :
	driver.c
;

Package openbeos-neomagic-1.0 :
	nm.driver : 
	boot home config add-ons kernel drivers bin ;
Package openbeos-neomagic-1.0 :
	<kernel!drivers!dev!graphics>nm.driver :
	boot home config add-ons kernel drivers dev graphics ;
Package openbeos-neomagic-1.0 :
	nm.settings :
	boot home config settings kernel drivers ;

# Link to kernel/drivers/dev/graphics
{
	local dir = [ FDirName $(OBOS_ADDON_DIR) kernel drivers dev graphics ] ;
	local instDriver = <kernel!drivers!dev!graphics>nm.driver ;
	MakeLocate $(instDriver) : $(dir) ;
	RelSymLink $(instDriver) : nm.driver ;
}

