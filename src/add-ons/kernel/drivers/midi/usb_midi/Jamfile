SubDir HAIKU_TOP src add-ons kernel drivers midi usb_midi ;

SetSubDirSupportedPlatformsBeOSCompatible ;

if $(TARGET_PLATFORM) != haiku {
	UseHeaders [ FDirName $(HAIKU_TOP) headers os drivers ] : true ;
                # We need the public usb headers also when not compiling for Haiku.
}
UsePrivateHeaders [ FDirName kernel util ] ;

KernelAddon usb_midi :
	usb_midi.c
	devlist.c
;

ObjectHdrs [ FGristFiles usb_midi$(SUFOBJ) ]
	: [ FDirName $(TARGET_COMMON_DEBUG_OBJECT_DIR) preferences devices ] ;

Includes [ FGristFiles usb_midi.c ] :
	<src!preferences!devices>usbdevs.h <src!preferences!devices>usbdevs_data.h ;

Package haiku-usbmidi-cvs
	:
	usb_midi
	:
	boot home config add-ons kernel drivers bin ;

PackageDriverSymLink haiku-usbmidi-cvs : midi usb_midi ;

