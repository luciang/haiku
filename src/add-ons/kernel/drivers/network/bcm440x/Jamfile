SubDir OBOS_TOP src add-ons kernel drivers network bcm440x ;

# For ether_driver.h
UsePrivateHeaders net ;

ObjectCcFlags [ FGristFiles b44lm.o ] : -w ;

R5KernelAddon bcm440x : kernel drivers bin :
	b44lm.c
	b44um.c
	mempool.c
	;

Package haiku-networkingkit-cvs :
	bcm440x :
	boot home config add-ons kernel drivers bin ;
Package haiku-networkingkit-cvs :
	<kernel!drivers!dev!net>bcm440x :
	boot home config add-ons kernel drivers dev net ;

# Link driver(s) to kernel/drivers/dev/net
{
	local dir = [ FDirName $(OBOS_ADDON_DIR) kernel drivers dev net ] ;

	local instDriver = <kernel!drivers!dev!net>bcm440x ;
	MakeLocate $(instDriver) : $(dir) ;
	RelSymLink $(instDriver) : bcm440x ;
}

# Installation

OBOSInstall install-networking : /boot/home/config/add-ons/kernel/drivers/bin : 
 	bcm440x 
;

OBOSInstallRelSymLink install-networking : /boot/home/config/add-ons/kernel/drivers/dev/net : 
	<installed>bcm440x : 
	installed-symlink 
;

