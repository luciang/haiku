SubDir OBOS_TOP src add-ons kernel drivers net stack ;

UsePrivateHeaders net ;

# a) Userland stack version:

# R5KernelAddon net_stack_driver : kernel drivers bin :
#	net_userstack_driver.c
# ;

# For OpenBeOS we should be building the driver objects this way.
#KernelObjects
#	net_userstack_driver.c
#	:
#	-fno-pic -D_KERNEL_MODE
#	;

# b) Kernelland stack version:
#
R5KernelAddon net_stack_driver : kernel drivers bin :
	net_stack_driver.c
;
#
# For OpenBeOS we should be building the kernel stack driver objects this way.
#KernelObjects
#	net_stack_driver.c
#	:
#	-fno-pic -D_KERNEL_MODE
#	;


# Link to kernel/drivers/dev/net
{
	local dir = [ FDirName $(OBOS_ADDON_DIR) kernel drivers dev net ] ;
	local instDriver = <kernel!drivers!dev!net>net_stack_driver ;
	MakeLocate $(instDriver) : $(dir) ;
	RelSymLink $(instDriver) : net_stack_driver ;
}
