SubDir OBOS_TOP src add-ons mail_daemon inbound_protocols imap ;

UsePrivateHeaders mail ;

SubDirHdrs [ FDirName $(OBOS_TOP) headers os add-ons mail_daemon ] ;

if $(TARGET_PLATFORM) = r5 {
	SubDirC++Flags -DBUILDING_R5_LIBNET ;
} else {
	SubDirC++Flags -DBONE ;
}

if $(USESSL) {
	SubDirC++Flags -DUSESSL ;
	SubDirHdrs [ FDirName / boot home config include ] ;
}

Addon IMAP : mail_daemon inbound_protocols :
	imap_client.cpp
	imap_config.cpp
	NestedString.cpp ;

if $(USESSL) {
	LinkSharedOSLibs IMAP :
		be libmail.so socket bind ssl crypto ;
} else if $(TARGET_PLATFORM) = r5 {
	LinkSharedOSLibs IMAP :
		 be libmail.so net ;
} else {
	LinkSharedOSLibs IMAP :
		 be libmail.so socket bind ;
}

Package haiku-maildaemon-cvs :
	IMAP : 
	boot home config add-ons mail_daemon inbound_protocols ;
