SubDir HAIKU_TOP src add-ons mail_daemon inbound_protocols imap ;

SetSubDirSupportedPlatformsBeOSCompatible ;

if $(TARGET_PLATFORM) != haiku {
	UsePublicHeaders mail ;
}

UsePublicHeaders [ FDirName add-ons mail_daemon ] ;
UsePrivateHeaders mail ;

SubDirHdrs [ FDirName $(HAIKU_TOP) headers os add-ons mail_daemon ] ;

local sslDir ;

if $(USE_SSL) {
	SubDirC++Flags -DUSE_SSL ;
	if ! $(SSL_DIR) {
		sslDir = [ FDirName $(HAIKU_OUTPUT_DIR) cross-ssl common ] ;
	} else {
		sslDir = $(SSL_DIR) ;
	}
	SubDirSysHdrs [ FDirName $(sslDir) include ] ;
}

Addon IMAP :
	imap_client.cpp
	imap_config.cpp
	NestedString.cpp ;

LinkAgainst IMAP : be libmail.so $(TARGET_NETWORK_LIBS) ;

if $(USE_SSL) {
	LinkAgainst IMAP : $(sslDir)/lib/libssl.so $(sslDir)/lib/libcrypto.so ;
}

Package haiku-maildaemon-cvs :
	IMAP :
	boot home config add-ons mail_daemon inbound_protocols ;
