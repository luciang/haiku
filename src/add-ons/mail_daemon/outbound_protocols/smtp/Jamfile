SubDir HAIKU_TOP src add-ons mail_daemon outbound_protocols smtp ;

SetSubDirSupportedPlatformsBeOSCompatible ;

if $(TARGET_PLATFORM) != haiku {
	UsePublicHeaders mail ;
}

UsePublicHeaders [ FDirName add-ons mail_daemon ] ;
UsePrivateHeaders mail ;

SubDirHdrs [ FDirName $(HAIKU_TOP) headers os add-ons mail_daemon ] ;

if $(USESSL) {
	SubDirC++Flags -DUSESSL ;
	SubDirHdrs [ FDirName / boot home config include ] ;
}

Addon SMTP :
	smtp.cpp
	md5c.c ;

LinkAgainst SMTP : be libmail.so $(TARGET_NETWORK_LIBS) ;

if $(USESSL) {
	LinkAgainst SMTP : ssl crypto ;
}

Package haiku-maildaemon-cvs :
	SMTP :
	boot home config add-ons mail_daemon outbound_protocols ;
