SubDir HAIKU_TOP src system kernel lib ;

# kernel libroot os files

KernelMergeObject kernel_os_main.o :
	driver_settings.c
	fs_info.c
	: $(TARGET_KERNEL_PIC_CCFLAGS)
;

SEARCH on [ FGristFiles driver_settings.c fs_info.c ]
	= [ FDirName $(HAIKU_TOP) src system libroot os ] ;

# kernel libroot posix files

local librootSources = [ FDirName $(HAIKU_TOP) src system libroot ] ;
local posixSources = [ FDirName $(librootSources) posix ] ;

SEARCH_SOURCE += [ FDirName $(posixSources) ] ;
SEARCH_SOURCE += [ FDirName $(posixSources) locale ] ;
SEARCH_SOURCE += [ FDirName $(posixSources) stdio ] ;
SEARCH_SOURCE += [ FDirName $(posixSources) stdlib ] ;
SEARCH_SOURCE += [ FDirName $(posixSources) string ] ;
SEARCH_SOURCE += [ FDirName $(posixSources) sys ] ;
SEARCH_SOURCE += [ FDirName $(posixSources) time ] ;
SEARCH_SOURCE += [ FDirName $(posixSources) unistd ] ;

KernelMergeObject kernel_posix.o :
	# main
 	kerrno.c
 	dirent.c
 	poll.c
 	utime.c
 	# locale
	ctype.c
	# stdio (this subdir)
	kernel_vsprintf.c
	# stdlib
	abs.c
	atoi.c
	bsearch.c
	merge.c
	qsort.c
	rand.c
	random.c
	strtol.c
	strtoll.c
	strtoul.c
	strtoull.c
	# sys
	chmod.c
	stat.c
	mkdir.c
	select.c
	gettimeofday.c
 	uio.c
	# time
	time.c
	# unistd
	access.c
	chown.c
	close.c
	conf.c
	directory.c
	dup.c
	fcntl.c
	hostname.c
	ioctl.c
	link.c
	lseek.c
	mount.c
	open.c
	read.c
	sync.c
	truncate.c
	usergroup.c
	write.c
	# string
	memchr.c
	memcmp.c
	memcpy.c
	memmove.c
	memset.c
	strcasecmp.c
	strcasestr.c
	strcat.c
	strchr.c
	strcmp.c
	strcpy.c
	strcspn.c
	strdup.c
	strerror.c
	strlcat.c
	strlcpy.c
	strlen.c
	strncat.c
	strncmp.c
	strncpy.c
	strnlen.c
	strpbrk.c
	strrchr.c
	strspn.c
	strstr.c
	strtok.c

	: $(TARGET_KERNEL_PIC_CCFLAGS)
;

SEARCH_SOURCE += [ FDirName $(librootSources) os arch $(TARGET_ARCH) ] ;

KernelMergeObject kernel_os_arch_$(TARGET_ARCH).o :
	atomic.S
	byteorder.S
	system_time_asm.S
	system_time.c

	: $(TARGET_KERNEL_PIC_CCFLAGS)
;
