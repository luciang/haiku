SubDir HAIKU_TOP src system libroot posix glibc arch x86 ;

SubDirSysHdrs $(HAIKU_TOP) src system libroot posix glibc include arch $(TARGET_ARCH) ;
SubDirSysHdrs $(HAIKU_TOP) src system libroot posix glibc include ;
SubDirSysHdrs $(HAIKU_TOP) src system libroot posix glibc stdlib ;
SubDirSysHdrs $(HAIKU_TOP) src system libroot posix glibc math ;
SubDirSysHdrs $(HAIKU_TOP) src system libroot posix glibc ;

if $(OPTIM) = -O0 {
	OPTIM = -O ;
}

# don't compile with debugging
DEBUG = 0 ;

SubDirCcFlags -D_GNU_SOURCE -D_IEEE_LIBM ;

KernelMergeObject posix_gnu_arch_$(TARGET_ARCH).o :
	add_n.S
	addmul_1.S
	cmp.c
	dbl2mpn.c
	divrem.c
	e_acos.S
	e_atan2.S
	e_atan2f.S
	e_atan2l.c
	e_fmod.S
	e_fmodf.S
	e_fmodl.c
	ldbl2mpn.c
	mpn2dbl.c
	mul.c
	mul_1.S
	mul_n.c
	lshift.S
	rshift.S
	s_ceil.S
	s_ceilf.S
	s_ceill.S
	s_copysign.S
	s_copysignf.S
	s_copysignl.S
	s_fdim.S
	s_fdimf.S
	s_fdiml.S
	s_fabs.S
	s_fabsf.S
	s_fabsl.S
	s_finite.S
	s_finitef.S
	s_finitel.S
	s_floor.S
	s_floorf.S
	s_floorl.S
	s_fpclassify.c
	s_fpclassifyf.c
	s_fpclassifyl.c
	s_logb.S
	s_logbf.S
	s_logbl.c
	s_modf.c
	s_modff.c
	s_modfl.c
	s_rint.S
	s_rintf.S
	s_rintl.c
	s_scalbn.S
	s_scalbnf.S
	s_scalbnl.S
	sub_n.S
	submul_1.S
	w_atan2.c
	w_atan2f.c
	w_atan2l.c
	w_fmod.c
	w_fmodf.c
	w_fmodl.c
	: -fPIC -DPIC
	;

SEARCH on [ FGristFiles
	cmp.c divrem.c mul.c mul_n.c dbl2mpn.c mpn2dbl.c s_fpclassify.c s_fpclassifyf.c s_fpclassifyl.c s_modf.c s_modff.c s_modfl.c 
	w_atan2.c w_atan2f.c w_atan2l.c w_fmod.c w_fmodl.c w_fmodf.c
        ] = [ FDirName $(HAIKU_TOP) src system libroot posix glibc arch ] ;
